{"version":3,"sources":["graphs/bar-graph.component.ts"],"names":[],"mappings":"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","file":"graphs/bar-graph.component.js","sourcesContent":["/**\n * Created by kfraser on 29/02/2016.\n */\nimport {Component, EventEmitter} from 'angular2/core';\nimport {CORE_DIRECTIVES, FORM_DIRECTIVES, NgClass} from 'angular2/common';\nimport {CHART_DIRECTIVES} from 'ng2-charts';\nimport {AnswerQuestionComponent} from \"../answer-component\";\nimport {forwardRef} from \"angular2/core\";\nimport {Inject} from \"angular2/core\";\nimport {HTTPService} from \"../services/http-service\";\nimport {Question} from \"../models/question\";\nimport {Answer} from \"../models/answer\";\nimport {OnInit} from \"angular2/core\";\nimport {OnChanges} from \"angular2/core\";\nimport {AfterViewChecked} from \"angular2/core\";\n\n\ndeclare var io: any;\n\n@Component({\n    selector: 'bar-graph',\n    templateUrl: '../views/graphs/bar_graph.html',\n    inputs: ['selectedQuestion'],\n    directives: [CHART_DIRECTIVES, NgClass, CORE_DIRECTIVES, FORM_DIRECTIVES]\n})\n\n/**\n * This is a default component - intentionally empty (including the\n * html) as it's needed when a child must have a terminal state.\n */\nexport class BarGraphComponent implements OnInit, OnChanges{\n\n\n    socket = null;\n    selectedQuestion: Question;\n    constructor(@Inject(forwardRef(() => AnswerQuestionComponent))private _parent: AnswerQuestionComponent,\n                private httpService: HTTPService) {\n        this.selectedQuestion = _parent.question;\n        this.barChartLabels = [];\n        this.getChoiceData();\n        this.socket = io('/');\n        this.socket.on('answer', function(){\n            console.log('Message from server: graph to be updated!!');\n            this.getChoiceData();\n        }.bind(this));\n    }\n\n    ngOnInit(){\n        this.barChartLabels = this.selectedQuestion.choices;\n        this.getChoiceData();\n    }\n\n    ngOnChanges(){\n        this.barChartLabels = this.selectedQuestion.choices;\n        this.getChoiceData();\n    }\n\n    // events\n    chartClicked(e:any) {\n        console.log(e);\n    }\n\n    chartHovered(e:any) {\n        console.log(e);\n    }\n\n    private barChartOptions = {\n        scaleShowVerticalLines: false,\n        responsive: true,\n        multiTooltipTemplate: '<%if (datasetLabel){%><%=datasetLabel %>: <%}%><%= value %>'\n    };\n    private barChartLabels = [];\n    private barChartSeries = ['Selected'];\n    public barChartType = 'Bar';\n    private barChartLegend:boolean = false;\n\n    private barChartData = [];\n\n    getChoiceData(){\n        var choiceOne = 0;\n        var choiceTwo = 0;\n        var choiceThree = 0;\n        var choiceFour = 0;\n\n        var answers: Answer[] = this.selectedQuestion.answers;\n\n        for(var answer of answers){\n            if(answer.answer === this.selectedQuestion.choices[0]){\n                choiceOne = choiceOne + 1;\n            }\n            if(answer.answer === this.selectedQuestion.choices[1]){\n                choiceTwo = choiceTwo + 1;\n            }\n            if(answer.answer === this.selectedQuestion.choices[2]){\n                choiceThree = choiceThree + 1;\n            }\n            if(answer.answer === this.selectedQuestion.choices[3]){\n                choiceFour = choiceFour + 1;\n            }\n        }\n        var choiceData = [choiceOne, choiceTwo, choiceThree, choiceFour];\n        this.barChartData = [choiceData];\n    }\n}"],"sourceRoot":"/source/"}